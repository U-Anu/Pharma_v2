{% extends 'admin_base.html' %}
{% block body_block %}
{% load static %}

<!-- FontAwesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<div class="container mt-4">
  <!-- Top Section with Create & Upload Buttons -->
  <div class="d-flex flex-wrap justify-content-between align-items-center">
    <h2 class="text-primary text-center w-100 mb-3">Product List</h2>

    <div class="d-flex flex-wrap gap-2">
      <a href="{% url 'update_all_products' %}" class="btn btn-primary">
        <i class="fa fa-upload"></i> Upload Products
      </a>

      <a href="{% url 'product_create' %}" class="btn btn-success">
        <i class="fa fa-plus"></i> Create Product
      </a>
    </div>
  </div>

  <!-- Responsive Table Wrapper -->
  <div class="table-responsive mt-4">
    <table class="table table-striped table-bordered text-center">
      <thead class="thead-dark">
        <tr>
          <th class="bg-primary text-white">Product ID</th>
          <th class="bg-primary text-white">Product Name</th>
          <th class="bg-primary text-white">Composition Name</th>
          <th class="bg-primary text-white">Product Type</th>
          <th class="bg-primary text-white">price</th>
          <th class="bg-primary text-white">Pack Size</th>
          <th class="bg-primary text-white">GST</th>
          <th class="bg-primary text-white">Quantity</th> 
          <th class="bg-primary text-white">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
        <tr>
          <td>{{ product.product_id }}</td>
          <td style="white-space: normal; word-wrap: break-word;">{{ product.name }}</td>
          <td style="white-space: normal; word-wrap: break-word;">{{ product.composition_name }}</td>
          <td>{{ product.product_type }}</td>
          <td>{{ product.price }}</td>
          <td>{{ product.pack_size }}</td>
          <td>{{ product.GST }}</td>
          <td>{{ product.quantity }}</td> 

          <td>
            <a href="{% url 'product_update' product.id %}" class="btn btn-sm btn-primary">
              <i class="fa fa-edit"></i> Edit
            </a>
            <a href="{% url 'product_delete' product.id %}" class="btn btn-sm btn-danger">
              <i class="fa fa-trash"></i> Delete
            </a>
            <a href="{% url 'product_markups' product.id %}" class="btn btn-sm btn-secondary">
              <i class="fa fa-percent"></i> Markups
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="12" class="text-center">No products found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}