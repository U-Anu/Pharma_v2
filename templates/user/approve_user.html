{% extends 'admin_base.html' %}
{% block body_block %}
<div class="container mt-4">
    <div class="card shadow-lg p-4">
        <h2 class="text-center mb-4">Approve {{ temp_user.first_name }} {{ temp_user.last_name }}</h2>

        {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <div class="row">
            <div class="col-md-4 text-center">
                {% if temp_user.profile_image %}
                    <a href="#" data-toggle="modal" data-target="#imageModal">
                        <img src="{{ temp_user.profile_image.url }}" alt="Profile Image" 
                             class="img-fluid rounded-circle shadow-sm" 
                             style="width: 150px; height: 150px; object-fit: cover; cursor: pointer;">
                    </a>
                {% else %}
                    <img src="https://via.placeholder.com/150" alt="Default Profile" class="img-fluid rounded-circle">
                {% endif %}
            </div>
            <div class="col-md-8">
                <p><strong>Name:</strong> {{ temp_user.first_name }} {{ temp_user.last_name }}</p>
                <p><strong>Email:</strong> {{ temp_user.email }}</p>
                <p><strong>Phone:</strong> {{ temp_user.phone_number }}</p>
                <p><strong>Alternate Phone:</strong> {{ temp_user.alternate_phone_number|default:"N/A" }}</p>
                <p><strong>DOB:</strong> {{ temp_user.dob|date:"M d, Y" }}</p>
                <p><strong>Gender:</strong> {{ temp_user.get_gender_display }}</p>
                <p><strong>Address:</strong> {{ temp_user.address }}</p>
            </div>
        </div>

        <!-- Category Selection Form -->
        <form method="POST" class="mt-4">
            {% csrf_token %}
            <div class="form-group">
                <label><strong>Select User Category:</strong></label>
                <select name="user_category" class="form-control" required>
                    <option value="">-- Select Category --</option>
                    {% for category in user_categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn btn-success mt-3 w-100">Approve User</button>
        </form>
    </div>
</div>

<!-- Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                {% if temp_user.profile_image %}
                    <img src="{{ temp_user.profile_image.url }}" class="img-fluid rounded shadow-lg" style="max-width: 100%;">
                {% else %}
                    <p>No Image Available</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
